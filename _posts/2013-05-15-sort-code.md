---
layout: post
title: 排序
date: 2013-05-15 17:40
categories: []
tags: iOS
---

```C

//
//  main.c
//  Sort
//
//  Created by natural on 2017/4/10.
//  Copyright © 2017年 mapzhx. All rights reserved.
//

#include <stdio.h>
#include  <time.h>

static int sort_arr[10000];

void swap(int *a, int *b){
    int tmp = *a;
    *a = *b;
    *b = tmp;
}


//O(n^2)
void bubble_sort(int *arr, int length){
    for (int i=0; i<length-1; i++) {
        for (int j=0; j<length-1-i; j++) {
            if (arr[j]>arr[j+1]) {
                swap(&arr[j], &arr[j+1]);
            }
        }
    }
}

//O(n^2)
void select_sort(int *arr, int length){
    for (int i=0; i<length-1; i++) {
        int min = i;
        for (int j=i+1; j<length; j++) {
            if (arr[j]<arr[min]) {
                min = j;
            }
        }
        if (min!=i) {
            swap(&arr[i], &arr[min]);
        }
    }
}

//O(n^2)
void insert_sort(int *arr, int length){
    for (int i=1; i<length; i++) {
        for (int j=i; j>0; j--) {
            if (arr[j-1]>arr[j]) {
                swap(&arr[j-1], &arr[j]);
            }
        }
    }
}


void quick_sort(int *arr, int left, int right){
    int i = left,
    j = right,
    temp = arr[left];

    while (i<j) {
        while (i<j && temp<=arr[j]) {
            j--;
        }
        arr[i] = arr[j];

        while (i<j && temp>=arr[i]) {
            i++;
        }
        arr[j] = arr[i];
    }

    arr[i] = temp;

    if (i>left) {
        quick_sort(arr, left, i-1);
    }
    if (j<right) {
        quick_sort(arr, i+1, right);
    }
}

void merge(int *arr, int start, int mid, int end, int *temp){
    int i = start, j = mid + 1;
    int z = 0;
    while (i<=mid && j<=end) {
        if (arr[i] <= arr[j]) {
            temp[z++] = arr[i++];
        }else{
            temp[z++] = arr[j++];
        }
    }

    while (i<=mid) {
        temp[z++] = arr[i++];
    }
    while (j<=end) {
        temp[z++] = arr[j++];
    }
    for (int x=0; x<z; x++) {
        arr[start + x] = temp[x];
    }
}

void division(int *arr, int start, int end, int *temp){
    if (start < end) {
        int mid = (start + end)/2.0;
        division(arr, start, mid, temp);
        division(arr, mid+1, end, temp);
        merge(arr, start, mid, end, temp);
    }
}

void merge_sort(int *arr, int length){
    int temp[length];
    division(arr, 0, length - 1, temp);
}

void adjust_heap(int *arr, int i, int length){
    int childNode , childValue;
    for (; 2*i+1<length; i=childNode) {
        childNode = 2*i+1;
        if (length>childNode+1 && arr[childNode+1]>arr[childNode])
            childNode++;
        if (arr[childNode]>arr[i]) {
            childValue = arr[childNode];
            arr[childNode] = arr[i];
            arr[i] = childValue;
        }else
            break;
    }
}

void heap_sort(int *arr, int length){
    for (int i=length/2-1; i>=0; --i)
        adjust_heap(arr, i, length);

    for (int j=length-1; j>0; --j) {
        arr[j] = arr[0]^arr[j];
        arr[0] = arr[0]^arr[j];
        arr[j] = arr[0]^arr[j];
        adjust_heap(arr, 0, j);
    }
}

void test_sort(){
    int length = sizeof(sort_arr)/sizeof(int);
    clock_t start, finish;
    double duration;
    start = clock();
    insert_sort(sort_arr, length);
//    quick_sort(sort_arr, 0, length-1);
    finish = clock();
    duration = (finish - start);
    printf("用时 %f ", duration);
}



int main(int argc, const char * argv[]) {

    // insert code here...
    FILE *fs = fopen("/Users/natural/Desktop/num.txt", "r");
    if (NULL == fs) {
        return 0;
    }
    char str[10] = {0};
    int i=0;
    while(!feof(fs))
    {
        memset(str, 0, sizeof(str));
        fgets(str, sizeof(str) - 1, fs); // 包含了\n
        sort_arr[i++] = atoi(str);
    }

    test_sort();


    fclose(fs);


    int length = sizeof(sort_arr)/sizeof(int);
    for (int i=0; i<length; i++) {
        printf("%d\n",sort_arr[i]);
    }
    return 0;
}

```
